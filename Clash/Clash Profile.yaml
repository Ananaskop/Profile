port: 7890           # HTTP 代理端口
socks-port: 7891     # SOCKS5 代理端口
redir-port: 7892     # Linux 和 macOS 的 redir 代理端口
mixed-port: 7893      # 混合端口 HTTP和SOCKS5用一个端口
allow-lan: true       # 允许局域网的连接（可用来共享代理）
bind-address: "*"     # 仅在将allow-lan设置为true时适用,"*": 绑定所有IP地址
ipv6: false           # 开启 IPv6 总开关，关闭阻断所有 IPv6 链接和屏蔽 DNS 请求 AAAA 记录
mode: rule            # 规则模式：rule（规则） / global（全局代理）/ direct（全局直连）/ script (脚本)
log-level: info       # 设置日志输出级别 (5 个级别：silent / error / warning / info / debug）
external-controller: 127.0.0.1:9090   #外部控制器,可以使用 RESTful API 来控制你的 clash 内核
dns:
 enable: true             # 关闭将使用系统 DNS
 ipv6: false              # IPV6解析开关；如果为false，将返回ipv6结果为空
 enhanced-mode: fake-ip   # 模式：redir-host或fake-ip
 listen: 0.0.0.0:53       # DNS监听地址
 fake-ip-range: 198.18.0.1/16    # Fake-IP解析地址池
 fake-ip-filter: ['*.lan','cable.auth.com','*.msftconnecttest.com','*.msftncsi.com','network-test.debian.org','detectportal.firefox.com','resolver1.opendns.com','*.srv.nintendo.net','*.stun.playstation.net','xbox.*.microsoft.com','*.xboxlive.com','stun.*','global.turn.twilio.com','global.stun.twilio.com','localhost.*.qq.com','localhost.*.weixin.qq.com','*.logon.battlenet.com.cn','*.logon.battle.net','*.blzstatic.cn','music.163.com','*.music.163.com','*.126.net','musicapi.taihe.com','music.taihe.com','songsearch.kugou.com','trackercdn.kugou.com','*.kuwo.cn','api-jooxtt.sanook.com','api.joox.com','joox.com','y.qq.com','*.y.qq.com','streamoc.music.tc.qq.com','mobileoc.music.tc.qq.com','isure.stream.qqmusic.qq.com','dl.stream.qqmusic.qq.com','aqqmusic.tc.qq.com','amobile.music.tc.qq.com','*.xiami.com','*.music.migu.cn','music.migu.cn','proxy.golang.org','*.mcdn.bilivideo.cn','*.cmpassport.com','id6.me','open.e.189.cn','mdn.open.wo.cn','opencloud.wostore.cn','auth.wosms.cn','*.jegotrip.com.cn','*.icitymobile.mobi','*.pingan.com.cn','*.cmbchina.com','pool.ntp.org','*.pool.ntp.org','ntp.*.com','time.*.com','ntp?.*.com','time?.*.com','time.*.gov','time.*.edu.cn','*.ntp.org.cn','PDC._msDCS.*.*','DC._msDCS.*.*','GC._msDCS.*.*']
 default-nameserver: [223.5.5.5,119.29.29.29]      # 解析非IP的dns用的dns服务器,只支持纯IP
 nameserver: [https://223.5.5.5/dns-query, https://1.12.12.12/dns-query]             # 默认DNS服务器，支持udp/tcp/dot/doh/doq

###建立锚点
# 订阅更新和延迟测试相关
p: &p {type: http, interval: 86400, health-check: {enable: true, url: http://www.apple.com/library/test/success.html, interval: 3000}}
# 策略组引用相关
pr: &pr {type: select, proxies: [DIRECT, PROXY, HK, SG, TW, US]}
prl: &prl {type: select, proxies: [HK, SG, TW]}
# 手动选择
use: &use {type: select, use: [Subscribe]}
# 自动选择
auto: &auto {type: url-test, lazy: true, url: http://www.apple.com/library/test/success.html, interval: 900, use: [Subscribe]}
# 简易策略组
easy: &easy {type: select, proxies: [DIRECT, PROXY]}
# classical规则相关
c: &c {type: http, behavior: classical, interval: 86400}
# domain规则相关
d: &d {type: http, behavior: domain, interval: 86400}
# ipcidr规则相关
i: &i {type: http, behavior: ipcidr, interval: 86400}
###结束

proxy-providers:
 Subscribe: {!!merge <<: *p, path: ./proxy_provider/Subscribe.yaml, url: '这里输入你的订阅地址'} # Sub-Store生成的链接，可以直接替换上述url引号中的部分，具体见Sub-Store教程

proxies:
proxy-groups:
 - {name: PROXY, !!merge <<: *use, icon: 'https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Bypass.png', type: select, use: [Subscribe]}
 - {name: STREAMING, !!merge <<: *prl, icon: 'https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/ForeignMedia.png', proxies: [HK, SG, TW], type: select}
 - {name: FINAL, !!merge <<: *easy, icon: 'https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Final.png', proxies: [DIRECT, PROXY], type: select}
 - {name: HK, !!merge <<: *auto, filter: "(?=.*(港|香港|HK|(?i)Hong))^((?!(手游|游戏|game|Game)).)*$", icon: 'https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/HK.png', interval: 900, lazy: true, type: url-test, use: [Subscribe], hidden: true}
 - {name: SG, !!merge <<: *auto, filter: "(?=.*(新加坡|狮城|SG|(?i)Singapore))^((?!(手游|游戏|game|Game)).)*$", icon: 'https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/SG.png', interval: 900, lazy: true, type: url-test, use: [Subscribe], hidden: true}
 - {name: TW, !!merge <<: *auto, filter: "(?=.*(台湾|台灣|TW|(?i)Taiwan))^((?!(手游|游戏|game|Game)).)*$", icon: 'https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/TW.png', interval: 900, lazy: true, type: url-test, use: [Subscribe], hidden: true}
 - {name: US, !!merge <<: *auto, filter: "(?=.*(美国|美國|US|(?i)States|American))^((?!(手游|游戏|game|Game)).)*$", icon: 'https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/US.png', interval: 900, lazy: true, type: url-test, use: [Subscribe], hidden: true}

rule-providers:
 RevisionRule: {!!merge <<: *c, path: ./rule_provider/RevisionRule.yaml, url: 'https://raw.githubusercontent.com/GiveYou32Likes/Profile/master/Clash/Rule/RevisionRule.yaml'}
 RejectRule: {!!merge <<: *c, path: ./rule_provider/RejectRule.yaml, url: 'https://raw.githubusercontent.com/GiveYou32Likes/Profile/master/Clash/Rule/RejectRule.yaml'}
 WeChat: {!!merge <<: *c, path: ./rule_provider/WeChat.yaml, url: 'https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/WeChat/WeChat.yaml'}
 Apple: {!!merge <<: *c, path: ./rule_provider/Apple.yaml, url: 'https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Apple/Apple_Classical.yaml'}
 Microsoft: {!!merge <<: *c, path: ./rule_provider/Microsoft.yaml, url: 'https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Microsoft/Microsoft.yaml'}
 ProxyRule: {!!merge <<: *c, path: ./rule_provider/ProxyRule.yaml, url: 'https://raw.githubusercontent.com/GiveYou32Likes/Profile/master/Clash/Rule/ProxyRule.yaml'}
 Google: {!!merge <<: *c, path: ./rule_provider/Google.yaml, url: 'https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Google/Google.yaml'}
 Telegram: {!!merge <<: *c, path: ./rule_provider/Telegram.yaml, url: 'https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Telegram/Telegram.yaml'}
 Disney: {!!merge <<: *c, path: ./rule_provider/Disney.yaml, url: 'https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Disney/Disney.yaml'}
 Netflix: {!!merge <<: *c, path: ./rule_provider/Netflix.yaml, url: 'https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Netflix/Netflix.yaml'}
 PayPal: {!!merge <<: *c, path: ./rule_provider/PayPal.yaml, url: 'https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/PayPal/PayPal.yaml'}
 Spotify: {!!merge <<: *c, path: ./rule_provider/Spotify.yaml, url: 'https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Spotify/Spotify.yaml'}
 YouTube: {!!merge <<: *c, path: ./rule_provider/YouTube.yaml, url: 'https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/YouTube/YouTube.yaml'}
 OpenAI: {!!merge <<: *c, path: ./rule_provider/OpenAI.yaml, url: 'https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/OpenAI/OpenAI.yaml'}
 Claude: {!!merge <<: *c, path: ./rule_provider/Claude.yaml, url: 'https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Claude/Claude.yaml'}
 Lan: {!!merge <<: *c, path: ./rule_provider/Lan.yaml, url: 'https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Lan/Lan.yaml'}
 GitHub: {!!merge <<: *c, path: ./rule_provider/GitHub.yaml, url: 'https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/GitHub/GitHub.yaml'}
 Global: {!!merge <<: *c, path: ./rule_provider/Global_Classical.yaml, url: 'https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Global/Global_Classical.yaml'}
 GlobalMedia: {!!merge <<: *c, path: ./rule_provider/GlobalMedia_Classical.yaml, url: 'https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/GlobalMedia/GlobalMedia_Classical.yaml'}
 Proxy: {!!merge <<: *c, path: ./rule_provider/Proxy_Classical.yaml, url: 'https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Proxy/Proxy_Classical.yaml'}
 China: {!!merge <<: *c, path: ./rule_provider/China.yaml, url: 'https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/China/China_Classical.yaml'}

rules:
 - RULE-SET,RevisionRule,DIRECT
 - RULE-SET,RejectRule,REJECT
 - RULE-SET,ProxyRule,PROXY
 - RULE-SET,WeChat,DIRECT
 - RULE-SET,Apple,DIRECT
 - RULE-SET,Microsoft,DIRECT
 - RULE-SET,Spotify,HK
 - RULE-SET,Netflix,STREAMING
 - RULE-SET,Disney,STREAMING
 - RULE-SET,YouTube,STREAMING
 - RULE-SET,OpenAI,US
 - RULE-SET,Claude,US
 - RULE-SET,PayPal,US
 - RULE-SET,Telegram,PROXY
 - RULE-SET,Google,STREAMING
 - RULE-SET,GitHub,PROXY
 - RULE-SET,Global,PROXY
 - RULE-SET,GlobalMedia,PROXY
 - RULE-SET,Proxy,PROXY
 - RULE-SET,China,DIRECT
 - RULE-SET,Lan,DIRECT
 - GEOIP,CN,DIRECT
 - MATCH,FINAL